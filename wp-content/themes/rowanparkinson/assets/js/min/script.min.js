!function(t){var e,n,i,o,a,s,r,c=(Backbone.Model,Backbone.View);e=c.extend({el:".home-list li",initialize:function(){var e=t("#grid"),n=0,i=[],o=3,a=function(){return 0};n=(e.innerWidth()-a())/o;for(var s=0;o>s;s++)i.push(0);this.$el.each(function(e,a){var s=e%o,r=t(a).nextAll().eq(o-1);t(a).css({opacity:0,left:s*n,width:n}),thisHeight=t(a).outerHeight(!1),i[s]+=thisHeight,r.css({top:i[s]}),setTimeout(function(){t(a).addClass("fadeInUpBig")},25+200*e)})}}),n=c.extend({el:".home-list",initialize:function(){this.showContent()},showContent:function(){return s.router.navigate("about",!0),!1}}),i=c.extend({el:".home-list",initialize:function(){this.showContent()},showContent:function(){s.router.navigate("contact",!0)}}),o=c.extend({el:".home-list",initialize:function(t){var e=this,t=e.$el.data("section");return this.showContent(t),alert(t),!1},showContent:function(t){s.router.navigate(t,!0)}}),SiteContent=c.extend({el:".site-main",initialize:function(){this.pageHome=new e,this.render()}}),a=c.extend({el:"body",events:{"click .posts a":"postClickHandler","click a.handle":"showMenu","click .site-main":"hideMenu"},currentUri:"",pages:{},initialize:function(){window.app=this,this.siteContent=new SiteContent,this.router=new r},render:function(){var t=this.$el.data("section");console.log(t),this.router.addPageRoutes(t),Backbone.history.start({pushState:!0,root:"/"})},postClickHandler:function(e){var n=t(e.currentTarget).attr("href"),i=(n.replace(Site.basePath+"/",""),t(e.currentTarget).parent("li"));return $i=i.index(),i.siblings("li").toggleClass("fadeInUpBig fadeOutDownBig"),i.animate({top:0}),setTimeout(function(){i.animate({left:"33.33%"}),setTimeout(function(){i.toggleClass("open")},550)},500),this.pagePosts=new o,!1},showMenu:function(e){e.preventDefault();var n=t(e.target);n.toggleClass("active"),t("#site-navigation").toggleClass("open")},hideMenu:function(){t(".handle").removeClass("active"),t("#site-navigation").removeClass("open")}}),r=Backbone.Router.extend({routes:{"(/)":"home","about(/)":"aboutPage","contact(/)":"contactPage",":section(/)":"postPage"},initialize:function(){this.bind("all",this.onAll)},pageConstructor:function(){s.currentUri=Backbone.history.fragment},home:function(){this.pageConstructor(),s.page=new e},aboutPage:function(){this.pageConstructor(),s.page||(s.page=new n)},contactPage:function(){this.pageConstructor(),s.page||(s.page=new i)},postPage:function(){this.pageConstructor(),s.page||(s.page=new o)},addPageRoutes:function(t){switch(t){case"home":this.route("(/)","home");break;case"about":this.route("(/)","about");break;case"contact":this.route("(/)","contact");break;case"posts":this.route("(/)(:section)(/)","posts")}}}),t(document).ready(function(){s=new a,s.render()})}(jQuery);